import{_ as n,c as a,a as t,o as e}from"./app-C1uG88mu.js";const p={};function o(c,s){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="message-protocol" tabindex="-1"><a class="header-anchor" href="#message-protocol"><span>Message Protocol</span></a></h1><p>This protocol is intended as a generic data format to store and transmit chat messages coming from different platforms through our socket system.</p><h2 id="namespace" tabindex="-1"><a class="header-anchor" href="#namespace"><span>Namespace</span></a></h2><p>At own3d we follow the <code>&lt;client_id&gt;.&lt;platform&gt;.&lt;platform_id&gt;[.&lt;extension&gt;]</code> namespace format.</p><ul><li>Example for own3d chatbot: <code>chatbot.&lt;shard&gt;</code></li><li>Example for own3d user: <code>90a951d1-ea50-4fda-8c4d-275b81f7d219.own3d.1.chat</code></li></ul><p>The <code>.chat</code> extension is a public room for all users to read.</p><h2 id="socket-connection" tabindex="-1"><a class="header-anchor" href="#socket-connection"><span>Socket Connection</span></a></h2><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code class="language-typescript"><span class="line"><span class="token comment">// Select a random server</span></span>
<span class="line"><span class="token keyword">const</span> server<span class="token operator">:</span> AxiosResponse<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://socket-hel1-1.own3d.dev/server-ids&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> serverId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> server<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token comment">// Connect to the socket</span></span>
<span class="line"><span class="token keyword">const</span> socket <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span><span class="token string">&#39;https://socket-hel1-1.own3d.dev&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    withCredentials<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Required for cookies</span></span>
<span class="line">    extraHeaders<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        Cookie<span class="token operator">:</span> <span class="token string">&#39;serverid=&#39;</span> <span class="token operator">+</span> serverId<span class="token punctuation">,</span> <span class="token comment">// Set the serverid cookie</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// login as chatbot or user</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token constant">TBD</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// TODO handle chat message</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;clear-chat&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token constant">TBD</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// TODO handle delete message</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;delete-message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token constant">TBD</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// TODO handle clear chat</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;ingress-event&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// TODO handle ingress event</span></span>
<span class="line">  </span>
<span class="line">  <span class="token comment">// example event: &quot;heartbeat&quot;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;heartbeat&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Received heartbeat event&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="message-reference" tabindex="-1"><a class="header-anchor" href="#message-reference"><span>Message Reference</span></a></h2><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9b1aef5e-b16a-4c7a-916e-309b7d581e67&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token comment">// message oder announcement</span></span>
<span class="line">  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1705400139136</span><span class="token punctuation">,</span> <span class="token comment">// Y2K38 acknowledged</span></span>
<span class="line">  <span class="token property">&quot;platform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;twitch&quot;</span><span class="token punctuation">,</span> <span class="token comment">// twitch, youtube, etc.</span></span>
<span class="line">  <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12354&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Sender&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.own3d.pro/v1/resolvers/avatars/{platform}/{platform_id}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span><span class="token punctuation">,</span> <span class="token comment">// nullable</span></span>
<span class="line">    <span class="token property">&quot;badges&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;moderator&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Moderator&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// or broadcaster / vip</span></span>
<span class="line">      <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subscriber&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Subscriber&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TwitchCon 2022&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234&quot;</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;channel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// own3d id</span></span>
<span class="line">    <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4321&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OWN3D&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.own3d.pro/v1/resolvers/avatars/{platform}/{platform_id}&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello @World! KEKW! Kappa Cheer17&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;fragments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello &quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mention&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@World&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;! KEKW! &quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;emote&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExtraLife&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;platform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;twitch&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;302426269&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;emote_set_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cheermote&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cheer17&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;platform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;twitch&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cheer&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;bits&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token property">&quot;tier&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;parent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9b1aef5e-b16a-4c7a-916e-309b7d581e67&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World!&quot;</span> <span class="token comment">// nullable</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// nullable</span></span>
<span class="line">  <span class="token property">&quot;platform_data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;video_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;live_chat_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// may be undefined see below</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;edited&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;accent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;highlight&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="message-attributes" tabindex="-1"><a class="header-anchor" href="#message-attributes"><span>Message Attributes</span></a></h2><h3 id="id" tabindex="-1"><a class="header-anchor" href="#id"><span><code>id</code></span></a></h3><p>The <code>id</code> attribute is a unique identifier for the message. The <code>id</code> attribute is a string that is generated by the platform.</p><h3 id="type" tabindex="-1"><a class="header-anchor" href="#type"><span><code>type</code></span></a></h3><p>The <code>type</code> attribute is a string that describes the type of the message. The <code>type</code> attribute may be <code>message</code> or <code>announcement</code>. The <code>announcement</code> uses the <code>accent</code> attribute to highlight the message in a given color. Twitch for example provides different colors for different colors.</p><h3 id="timestamp" tabindex="-1"><a class="header-anchor" href="#timestamp"><span><code>timestamp</code></span></a></h3><p>The <code>timestamp</code> attribute is a UNIX timestamp in milliseconds that represents the time when the message was received by our system.</p><h3 id="platform" tabindex="-1"><a class="header-anchor" href="#platform"><span><code>platform</code></span></a></h3><p>The <code>platform</code> attribute is a string that represents the platform where the message was sent. The <code>platform</code> attribute may be <code>twitch</code>, <code>youtube</code>, etc.</p><h3 id="user" tabindex="-1"><a class="header-anchor" href="#user"><span><code>user</code></span></a></h3><p>The <code>user</code> attribute is an object that contains information about the user who sent the message.</p><h3 id="channel" tabindex="-1"><a class="header-anchor" href="#channel"><span><code>channel</code></span></a></h3><p>The <code>channel</code> attribute is an object that contains information about the channel where the message was sent.</p><h3 id="message" tabindex="-1"><a class="header-anchor" href="#message"><span><code>message</code></span></a></h3><p>The <code>message</code> attribute is a raw string that contains the text of the message.</p><h3 id="fragments" tabindex="-1"><a class="header-anchor" href="#fragments"><span><code>fragments</code></span></a></h3><p>The <code>fragments</code> attribute is an array of objects that represent the different parts of the message. Each fragment has a <code>type</code> attribute that describes the type of the fragment and a <code>text</code> attribute that contains the text of the fragment.</p><h4 id="text-fragment" tabindex="-1"><a class="header-anchor" href="#text-fragment"><span>Text Fragment</span></a></h4><p>The <code>text</code> fragment represents a plain text fragment.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello &quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mention-fragment" tabindex="-1"><a class="header-anchor" href="#mention-fragment"><span>Mention Fragment</span></a></h4><p>The <code>mention</code> fragment represents a mention of another user in the message. The <code>mention</code> fragment may contain an <code>id</code> attribute that represents the user platform ID of the mentioned user.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mention&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@World&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="emote-fragment" tabindex="-1"><a class="header-anchor" href="#emote-fragment"><span>Emote Fragment</span></a></h4><p>The <code>emote</code> fragment represents an emote in the message. The <code>emote</code> fragment may contain an <code>emote_set_id</code> attribute that represents the emote set ID of the emote.</p><p>Each emote has a <code>platform</code> and <code>platform_id</code> attribute that represents the platform and the platform ID of the emote.</p><p>In the future, we may resolve 7TV, BTTV, FFZ emotes on our server-side to provide a unified experience.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;emote&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExtraLife&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;platform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;twitch&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;302426269&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;emote_set_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cheermote-fragment" tabindex="-1"><a class="header-anchor" href="#cheermote-fragment"><span>Cheermote Fragment</span></a></h4><p>The <code>cheermote</code> fragment represents a cheermote in the message. The <code>cheermote</code> fragment contains a <code>bits</code> attribute that represents the number of bits used for the cheermote and a <code>tier</code> attribute that represents the tier of the cheermote.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cheermote&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Cheer17&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;platform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;twitch&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;platform_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cheer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;bits&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;tier&quot;</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parent" tabindex="-1"><a class="header-anchor" href="#parent"><span><code>parent</code></span></a></h3><p>The <code>parent</code> attribute is an object that contains information about the parent message of the message. The <code>parent</code> attribute may be <code>null</code> if the message is not a reply to another message.</p><h3 id="platform-data" tabindex="-1"><a class="header-anchor" href="#platform-data"><span><code>platform_data</code></span></a></h3><p>The <code>platform_data</code> attribute is a platform-specific object that contains additional information about the message. The <code>platform_data</code> attribute may be <code>undefined</code> if the platform does not provide additional information.</p><h3 id="attributes" tabindex="-1"><a class="header-anchor" href="#attributes"><span><code>attributes</code></span></a></h3><p>The <code>attributes</code> attribute is a generic object that contains additional information about the message specific to OWN3D related features.</p><h2 id="known-issues" tabindex="-1"><a class="header-anchor" href="#known-issues"><span>Known Issues</span></a></h2><ul><li>The <code>cheermote</code> fragment may or may not keep the <code>bits</code> and <code>tier</code> attributes. This is due to the fact that the <code>bits</code> and <code>tier</code> attributes are not available for all platforms.</li><li>The <code>emote</code> fragment may or may not keep the <code>emote_set_id</code> attribute. This is due to the fact that the <code>emote_set_id</code> attribute is not available for all platforms.</li><li>The <code>mention</code> fragment may or may not contain the <code>id</code> attribute.</li></ul>`,49)])])}const i=n(p,[["render",o]]),r=JSON.parse('{"path":"/docs/chatbot/message-protocol.html","title":"Message Protocol","lang":"en-US","frontmatter":{},"git":{},"filePathRelative":"docs/chatbot/message-protocol.md"}');export{i as comp,r as data};
